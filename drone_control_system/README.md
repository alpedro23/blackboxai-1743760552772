# Система управления автономным дроном

## Описание системы

Система обеспечивает:
- Автономную навигацию по точкам маршрута
- Обход препятствий
- Забор проб почвы
- Трекинг объектов
- Интеграцию с QGroundControl и ArduPilot

### Основные модули:

1. **Навигационный модуль**:
   - Обработка точек маршрута
   - Локализация и картографирование
   - Облет препятствий

2. **Модуль забора проб**:
   - Управление сервоприводами бура
   - Контроль механизма сбора образцов
   - Интеграция с системой навигации

3. **Модуль трекинга**:
   - Обнаружение объектов по видео
   - Алгоритм KCF для слежения
   - Публикация координат цели

## Инструкция по установке

### Требования:
- Ubuntu 20.04
- ROS Noetic
- ArduPilot последней версии
- QGroundControl

### Установка:

1. Создать рабочее пространство ROS:
```bash
mkdir -p ~/catkin_ws/src
cd ~/catkin_ws/
catkin_make
```

2. Клонировать репозиторий:
```bash
cd ~/catkin_ws/src
git clone [ваш репозиторий]
```

3. Установить зависимости:
```bash
sudo apt-get install ros-noetic-mavros ros-noetic-cv-bridge
```

4. Собрать пакет:
```bash
cd ~/catkin_ws
catkin_make
```

## Настройка подключения

1. **Подключение к ArduPilot**:
   - Настроить параметры соединения в файле `launch/drone_control.launch`
   ```xml
   <arg name="fcu_url" default="serial:///dev/ttyUSB0:57600"/>
   ```

2. **Интеграция с QGroundControl**:
   - Убедитесь, что MAVLink соединение активно
   - В QGroundControl:
     - Откройте настройки
     - Выберите "MAVLink"
     - Укажите порт подключения

## Запуск системы

1. Запуск всех модулей:
```bash
roslaunch drone_control_system drone_control.launch
```

2. В QGroundControl:
   - Откройте вкладку "Управление"
   - Активируйте модуль забора проб
   - Настройте параметры трекинга

## Управление модулями

### Забор проб:
- Топик: `/sampling/command`
- Формат: `std_msgs/Bool`
- `true` - начать забор, `false` - завершить

### Трекинг объектов:
- Вход: видео поток `/video_streamer/image`
- Выход: координаты `/tracking/target`

## Техническая поддержка
По вопросам работы системы обращайтесь: [ваши контакты]